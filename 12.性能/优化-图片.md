# 图片优化

## 图片格式选择策略

### JPEG (.jpg/.jpeg)

- 适用于：照片、复杂的渐变图像
- 特点：
  - 有损压缩，文件小
  - 支持 24 位真彩色
  - 不支持透明度
- 最佳场景：
  - 大型照片展示
  - 商品实物图
  - 风景图片
  - 人物照片

### PNG (.png)

- 适用于：需要透明度、线条清晰的图像
- 特点：
  - 无损压缩
  - 支持透明度
  - 文件较大
- 最佳场景：
  - Logo
  - 图标
  - 带透明背景的图片
  - 截图（特别是文字清晰度要求高的）

### SVG (.svg)

- 适用于：图标、Logo、简单图形
- 特点：
  - 矢量格式，可无限放大
  - 文件小
  - 可通过代码控制
- 最佳场景：
  - UI 图标
  - Logo
  - 简单的图表
  - 动画图形

### GIF (.gif)

- 适用于：简单动画、表情包
- 特点：
  - 支持动画
  - 支持透明
  - 色彩限制（256 色）
- 最佳场景：
  - 简单动画
  - 表情包
  - 小型动态图标

### WebP (.webp)

- 适用于：Web 图片的通用替代方案
- 特点：
  - 同时支持有损和无损压缩
  - 支持透明度
  - 支持动画
  - 比同类格式小 25-34%
- 最佳场景：
  - Web 页面的所有图片场景
  - 需要考虑兼容性，建议提供降级方案

## 图片优化建议

1. 文件大小控制

   - 网页图片建议控制在 200KB 以内
   - Banner 图片控制在 1MB 以内
   - 使用适当的压缩工具（如：TinyPNG）

2. 尺寸选择

   - 按照实际显示尺寸选择图片
   - 考虑 2x/3x 屏幕，适当提供高清图片
   - 使用响应式图片技术（srcset、sizes）

3. 加载策略

   - 使用懒加载（lazy-loading）
   - 考虑渐进式加载
   - 使用适当的 CDN 加速

4. 特殊情况处理
   - 电商产品图：主图使用 JPEG，细节图使用 PNG
   - 图标类：优先使用 SVG，其次是 PNG
   - 大图展示：考虑使用渐进式 JPEG

# 渐进式 JPEG (Progressive JPEG)

## 基本概念

- 渐进式 JPEG 是一种特殊的 JPEG 格式，图片会分多次渐进式地显示
- 与之对应的是标准 JPEG（基线 JPEG，Baseline JPEG）

## 加载方式对比

1. 标准 JPEG：

   - 从上到下逐行加载
   - 看起来像是图片在"刷新"出来
   - 在加载过程中只能看到已下载部分

2. 渐进式 JPEG：
   - 先显示整张图片的模糊版本
   - 随着数据加载，图片逐渐变得清晰
   - 通常经过 3-5 次渐进扫描才能达到完整清晰度

## 优势

- 用户体验更好：
  - 用户可以更快看到整张图片的大致内容
  - 不会出现半张图的状况
  - 特别适合网速较慢的情况
- 在某些情况下文件更小：
  - 某些图片用渐进式压缩后体积会更小

## 劣势

- 解码需要更多的 CPU 资源
- 需要等待完整下载才能看到最终效果
- 在某些情况下文件可能更大

## 使用建议

- 适用场景：
  - 大尺寸图片（如 Banner）
  - 页面重要位置的图片
  - 需要优化用户等待体验的场景
- 不适用场景：
  - 小图片（小于 10KB）
  - 需要快速解码的场景
